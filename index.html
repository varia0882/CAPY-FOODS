<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CAPY FOODS</title>
  <style>
    * { box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f0f2f5;
    }

    header {
      background-color: #00b14f;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .container {
      padding: 20px;
      max-width: 1200px;
      margin: auto;
    }

    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .item {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }

    .item:hover {
      transform: translateY(-5px);
    }

    .item img {
      width: 100%;
      height: 140px;
      object-fit: cover;
    }

    .item-content {
      padding: 15px;
    }

    .item h3 {
      font-size: 16px;
      margin: 0 0 10px 0;
    }

    .item button {
      width: 100%;
      padding: 10px;
      background-color: #00b14f;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .item button:hover {
      background-color: #009e45;
    }

    #order-summary {
      background: white;
      padding: 20px;
      margin-top: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    #order-summary h2 {
      margin-top: 0;
    }

    .order-list {
      margin: 10px 0;
    }

    .order-list li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }

    .order-list button {
      margin-left: 5px;
      padding: 2px 8px;
      font-size: 14px;
      border: none;
      background-color: #ddd;
      cursor: pointer;
      border-radius: 4px;
    }

    .order-list button:hover {
      background-color: #ccc;
    }

    #driver-selection {
      margin-top: 20px;
      text-align: center;
    }

    #driver-selection button {
      margin: 8px;
      padding: 10px 16px;
      background-color: #25d366;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }

    #driver-selection button:hover {
      background-color: #20c05a;
    }

    #chatbox {
      margin-top: 30px;
    }

    #chatMessages {
      height: 200px;
      overflow-y: auto;
      background: #fff;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    #chatInput {
      width: 80%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    #chatbox button {
      padding: 9px 12px;
      background-color: #00b14f;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #chatbox button:hover {
      background-color: #009944;
    }

    textarea {
      width: 100%;
      margin-top: 15px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>
    CAPY FOODS
    <div style="font-size: 14px; font-weight: normal; margin-top: 5px;">
      Melayani pemesanan wilayah <strong>Purwodadi</strong>
    </div>
  </header>

  <div class="container">
    <div class="menu">
      <!-- Item makanan -->
      <div class="item">
        <img src="https://www.masakapahariini.com/wp-content/uploads/2023/03/shutterstock_1949306203-500x300.jpg" alt="Nasi Ayam Geprek">
        <div class="item-content">
          <h3>Nasi Ayam Geprek - Rp14.000</h3>
          <button onclick="addToCart('Nasi Ayam Geprek')">Tambah</button>
        </div>
      </div>
      <!-- Tambahkan item lainnya di sini dengan format yang sama -->
      <!-- ... (copy item lainnya dari versi sebelumnya) -->
      <div class="item">
        <img src="https://png.pngtree.com/recommend-works/png-clipart/20241204/ourmid/pngtree-coffee-ice-drink-soft-with-milk-plastic-cup-png-image_14621829.png" alt="Es Kopi">
        <div class="item-content">
          <h3>Es Kopi - Rp6.000</h3>
          <button onclick="addToCart('Es Kopi')">Tambah</button>
        </div>
      </div>
    </div>

    <div id="order-summary" style="display:none;">
      <h2>Pesanan Kamu:</h2>
      <ul class="order-list" id="orderList"></ul>

      <textarea id="commentBox" placeholder="Tulis komentar atau permintaan khusus di sini..."></textarea>

      <div id="driver-selection">
        <h3>Kirim Pesanan:</h3>
        <button onclick="sendToRandomDriver()">Kirim ke Driver</button>
      </div>

      <div id="chatbox">
        <h3>Pesan Antar Driver dan Pemesan</h3>
        <div id="chatMessages"></div>
        <input type="text" id="chatInput" placeholder="Ketik pesan..." />
        <button onclick="sendChatMessage()">Kirim</button>
      </div>
    </div>
  </div>

  <script>
    const drivers = [
      "6281953905692",
      "62882008655045",
      "6281388067377",
      "6283851183608"
    ];

    const items = {
      "Nasi Ayam Geprek": 14000,
      "Mie Level": 12500,
      "Mie Rebus (+ Telur/Butir)": 13500,
      "Nasi Padang": 12000,
      "Roti Bakar": 12000,
      "Pentol Bakar": 10000,
      "Es Teh": 4000,
      "Es Jeruk": 4000,
      "Es Kopi": 6000
    };

    const cart = {};

    function addToCart(item) {
      cart[item] = (cart[item] || 0) + 1;
      updateOrderList();
      document.getElementById("order-summary").style.display = "block";
    }

    function removeItem(item) {
      delete cart[item];
      updateOrderList();
    }

    function changeQuantity(item, amount) {
      cart[item] += amount;
      if (cart[item] <= 0) removeItem(item);
      else updateOrderList();
    }

    function updateOrderList() {
      const orderList = document.getElementById("orderList");
      orderList.innerHTML = "";
      let total = 0;

      Object.keys(cart).forEach((item, i) => {
        const qty = cart[item];
        const subtotal = items[item] * qty;
        total += subtotal;

        const li = document.createElement("li");
        li.innerHTML = `${item} x ${qty} = Rp${subtotal.toLocaleString()} 
          <button onclick="changeQuantity('${item}', 1)">+</button>
          <button onclick="changeQuantity('${item}', -1)">-</button>
          <button onclick="removeItem('${item}')">üóëÔ∏è</button>`;
        orderList.appendChild(li);
      });

      const totalLi = document.createElement("li");
      totalLi.style.fontWeight = "bold";
      totalLi.textContent = `Total: Rp${total.toLocaleString()}`;
      orderList.appendChild(totalLi);
    }

    function sendToRandomDriver() {
      if (Object.keys(cart).length === 0) {
        alert("Pesanan masih kosong!");
        return;
      }

      const randomIndex = Math.floor(Math.random() * drivers.length);
      const driverNumber = drivers[randomIndex];

      let pesan = "Halo, saya ingin memesan:\n\n";
      let total = 0;

      Object.keys(cart).forEach((item, i) => {
        const qty = cart[item];
        const harga = items[item] * qty;
        total += harga;
        pesan += `${i + 1}. ${item} x ${qty} = Rp${harga.toLocaleString()}\n`;
      });

      const komentar = document.getElementById("commentBox").value.trim();
      if (komentar) {
        pesan += `\nCatatan: ${komentar}`;
      }

      pesan += `\n\nTotal: Rp${total.toLocaleString()}`;
      const url = `https://wa.me/${driverNumber}?text=${encodeURIComponent(pesan)}`;
      window.open(url, "_blank");
    }

    function sendChatMessage() {
      const input = document.getElementById("chatInput");
      const message = input.value.trim();
      if (!message) return;

      const chatBox = document.getElementById("chatMessages");

      const userMsg = document.createElement("div");
      userMsg.textContent = "Pemesan: " + message;
      userMsg.style.marginBottom = "8px";
      userMsg.style.color = "#333";
      chatBox.appendChild(userMsg);

      input.value = "";

      setTimeout(() => {
        const driverMsg = document.createElement("div");
        driverMsg.textContent = "Driver: Pesan kamu sudah diterima!";
        driverMsg.style.marginBottom = "8px";
        driverMsg.style.color = "#006400";
        chatBox.appendChild(driverMsg);
        chatBox.scrollTop = chatBox.scrollHeight;
      }, 1000);
    }
  </script>
</body>
</html>
